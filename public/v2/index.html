<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Euchre Multiplayer</title>
    <link rel="stylesheet" href="/v2/css/styles.css">
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <header class="header">
        <h1>Euchre Multiplayer</h1>
        <div id="connection-status" class="connection-status">Connecting...</div>
    </header>

    <!-- Lobby Screen -->
    <div id="lobby" class="lobby">
        <h2>Join Game</h2>
        <form id="joinForm">
            <div class="form-group">
                <label for="playerName">Your Name</label>
                <input type="text" id="playerName" placeholder="Enter your name" required>
            </div>
            <button type="submit" class="primary">Join Game</button>
        </form>
    </div>

    <!-- Game Board -->
    <div id="game" class="container" style="display: none;">
        <div class="game-board">
            <!-- North Player -->
            <div class="player-area" data-role="north">
                <div class="player-name">North</div>
                <div class="player-score">0</div>
                <div class="player-cards"></div>
            </div>

            <!-- West Player -->
            <div class="player-area" data-role="west">
                <div class="player-name">West</div>
                <div class="player-score">0</div>
                <div class="player-cards"></div>
            </div>

            <!-- Center Area -->
            <div class="center-area">
                <div class="game-info">
                    <div>Trump: <span class="trump-suit">-</span></div>
                    <div>Dealer: <span class="dealer">-</span></div>
                    <div>Turn: <span class="current-turn">-</span></div>
                </div>
                <div class="current-trick">
                    <!-- Trick cards will be inserted here -->
                </div>
                <div class="scores">
                    <div>Team 1: <span class="team1-score">0</span></div>
                    <div>Team 2: <span class="team2-score">0</span></div>
                </div>
            </div>

            <!-- East Player -->
            <div class="player-area" data-role="east">
                <div class="player-name">East</div>
                <div class="player-score">0</div>
                <div class="player-cards"></div>
            </div>

            <!-- South Player (Current Player) -->
            <div class="player-area" data-role="south">
                <div class="player-name">You (South)</div>
                <div class="player-score">0</div>
                <div class="player-hand">
                    <!-- Player's cards will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Game Controls -->
        <div class="game-controls">
            <!-- Bidding Controls -->
            <div id="biddingControls" class="bidding-controls" style="display: none;">
                <button id="passBtn" class="secondary">Pass</button>
                <button id="orderUpBtn" class="success">Order Up</button>
                <button id="goAloneBtn" class="warning">Go Alone</button>
                <div class="suit-selector">
                    <select id="suitSelector">
                        <option value="HEARTS">Hearts ♥</option>
                        <option value="DIAMONDS">Diamonds ♦</option>
                        <option value="CLUBS">Clubs ♣</option>
                        <option value="SPADES">Spades ♠</option>
                    </select>
                    <button id="pickSuitBtn" class="primary">Pick Suit</button>
                </div>
            </div>

            <!-- Playing Controls -->
            <div id="playingControls" class="playing-controls" style="display: none;">
                <button id="playCardBtn" disabled>Play Selected Card</button>
            </div>
        </div>
    </div>

    <!-- Messages Container -->
    <div class="messages"></div>

    <!-- Game Over Modal (initially hidden) -->
    <div id="gameOverModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Game Over!</h2>
            <p id="gameResult"></p>
            <button id="newGameBtn" class="primary">Play Again</button>
        </div>
    </div>

    <!-- Game Rules Modal -->
    <div id="rulesModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>How to Play Euchre</h2>
            <div class="rules-content">
                <h3>Objective</h3>
                <p>Be the first team to score 10 points by winning tricks with your partner.</p>
                
                <h3>Card Ranking</h3>
                <p>Cards rank from highest to lowest: A, K, Q, J, 10, 9 (with the left and right bowers as the highest trumps).</p>
                
                <h3>Bidding</h3>
                <p>Players take turns deciding whether to accept the face-up card as trump or pass.</p>
                
                <h3>Gameplay</h3>
                <p>Players must follow suit if possible. The highest card of the led suit wins unless a trump is played.</p>
                
                <button id="closeRulesBtn" class="secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Help Button -->
    <button id="helpBtn" class="help-button">?</button>

    <!-- Scripts -->
    <script src="/js/socketHandler.js"></script>
    <script>
        // Help button to show rules
        document.getElementById('helpBtn')?.addEventListener('click', () => {
            document.getElementById('rulesModal').style.display = 'flex';
        });

        // Close rules modal
        document.getElementById('closeRulesBtn')?.addEventListener('click', () => {
            document.getElementById('rulesModal').style.display = 'none';
        });

        // Close modal when clicking outside
        window.addEventListener('click', (event) => {
            const modal = document.getElementById('rulesModal');
            if (event.target === modal) {
                modal.style.display = 'none';
            }
        });
    </script>
</body>
</html>
